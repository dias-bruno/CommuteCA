---
title: "Downloading_packages"
output: html_document
---

```{r}
library(miniCRAN)
library(igraph)
```

```{r}
pkg_dir <- "C:/Bruno/packages/RDC_Packages" 
dir.create(pkg_dir, showWarnings = FALSE)
```

```{r}
main_pkgs <- c("dplyr", "ggplot2", "RColorBrewer", "scales", "sf", "tmap", "tidyr", "here",
              "cancensus", "geojsonsf", "data.table", "rJava", "r5r", "corrr", "janitor",
              "ggridges", "readr", "skimr", "rmarkdown", "knitr")
```

```{r}
pkgs_needed <- pkgDep(main_pkgs, suggests = FALSE, enhances = FALSE)
```

```{r}
pkgs_needed
```

```{r}
download.packages(pkgs = pkgs_needed,
  destdir = pkg_dir,
  type = "source",
  dependencies = TRUE)
```
```{r}
dg <- makeDepGraph(pkgs_needed, suggests = FALSE, enhances = FALSE)
```

```{r}
install_order <- names(igraph::topo_sort(dg))
```

```{r}
install_order
```

